<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Doctor Appointment Chatbot</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <!-- Chatbot toggle button -->
    <button id="chatbot-icon" aria-label="Toggle Doctor Appointment Chatbot" onclick="toggleChat()" title="Open Chatbot">
        <svg class="chatbot-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z" />
        </svg>
    </button>

    <!-- Chat window -->
    <div id="chat-container" role="dialog" aria-labelledby="chat-title">
        <div id="chat-header">
            <div class="chat-header-content">
                <svg class="header-logo" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 22s-8-4.5-8-11.8A8 8 0 0112 2a8 8 0 018 8.2C20 17.5 12 22 12 22z" />
                    <path d="M12 6v4m0 0v2m0-2h4m-4 0H8" />
                </svg>
                <h2 id="chat-title">Micky</h2>
            </div>
            <button id="end-button" aria-label="End Conversation" onclick="handleEnd()">End</button>
        </div>
        <div id="chat-box" role="log" aria-live="polite"></div>
        <div id="chat-loading" class="loading" style="display: none;">
            <div class="spinner"></div>
        </div>
        <div id="chat-input">
            <input type="text" id="user-input" placeholder="Type your message..." onkeydown="handleKey(event)" aria-label="Type your message" />
            <button id="send-button" aria-label="Send Message" onclick="handleUserInput()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M5 12h14M5 12l6-6m-6 6l6 6" />
                </svg>
            </button>
        </div>
        <div id="voice-controls" style="display: none;">
            <button id="voice-start" class="voice-button" aria-label="Start Voice Recording" onclick="startVoiceRecognition()">Start</button>
            <button id="voice-stop" class="voice-button" aria-label="Stop Voice Recording" onclick="stopVoiceRecognition()" style="display: none;">Stop</button>
            <button id="voice-stop-speaking" class="voice-button" aria-label="Stop Speaking" onclick="stopSpeaking()" style="display: none;">Stop Speaking</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>